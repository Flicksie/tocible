(function(a){var d={heading:"",subheading:"",navigation:"",title:"",hash:!1,offset:50,speed:500};a.fn.tocible=function(l){var e=a.extend({},d,l);return this.each(function(){var b=a(this),c,g,h,k;c=b.find(e.navigation);c.addClass("tocible").html("<ul/>");k=c.offset().left;b.append(c).css({position:"relative"});if(e.title){var d=a(e.title).length?a(e.title).text():e.title;a("<div/>",{"class":"tocible_header",html:"<span/>"+d}).prependTo(c).click(function(){a(this).siblings("ul").slideToggle({duration:"slow",
step:contain});a(this).find("span").toggleClass("toc_open")})}g=b.find(e.heading);h=b.find(e.subheading);g.add(h).each(function(){var f=a(this),c,b,d;c=f.attr("id")?"#"+f.attr("id"):"#";b=f.text();f.is(g)?d="heading":f.is(h)&&(d="subheading");b=a("<a/>",{text:b,href:c});a("<li/>",{"class":"tocible_"+d}).append(b).appendTo(".tocible > ul");b.click(function(b){b.preventDefault();b=f.offset();if(e.hash){var d=a(window).scrollTop();history.pushState?history.pushState({},document.title,c):(window.location.hash=
c,a(window).scrollTop(d))}a("html, body").stop(!0).animate({scrollTop:b.top-10},e.speed)})});contain=function(){var f=a(window).scrollTop(),d=b.offset().top;c.css({top:e.offset,bottom:"auto",left:k});d+b.outerHeight()<=f+c.height()+e.offset?c.css({position:"absolute",bottom:0,top:"auto"}):f>=d?c.css({position:"fixed",bottom:"auto",top:e.offset}):c.css({position:"absolute"})};onScroll=function(){g.add(h).each(function(b){var c=a(this).offset().top;a(window).scrollTop()>=c-20?a(".tocible li").eq(b).addClass("toc_scrolled").prev().removeClass("toc_scrolled"):
a(".tocible li").eq(b).removeClass("toc_scrolled")})};a(window).scroll(function(){contain();onScroll()}).trigger("scroll")})}})(jQuery);